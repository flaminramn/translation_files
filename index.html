<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>WAB Library</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="auth-controls">
  <a href="/.auth/login/github" id="login-btn">Login</a>
  <a href="/.auth/logout" id="logout-btn" style="display:none;">Logout</a>
  <span id="user-email"></span>
</div>

<header>
  <h1>WAB Library</h1>
  <nav>
    <a href="#" id="home-link">Home</a>
  </nav>
</header>

<main>
  <h2>Books</h2>
  <ul id="book-list"></ul>
  <div style="margin-top:20px;">
  <button id="prev-btn">Previous</button>
  <span id="page-info"></span>
  <button id="next-btn">Next</button>
</div>

  <h2>Pages</h2>
  <div id="image-container"></div>
</main>

<script src="app.js">
  fetch("/.auth/me")
  .then(res => res.json())
  .then(data => {
    const loginBtn = document.getElementById("login-btn");
    const logoutBtn = document.getElementById("logout-btn");
    const userEmail = document.getElementById("user-email");

    if (data && data.clientPrincipal) {
      loginBtn.style.display = "none";
      logoutBtn.style.display = "inline";
      userEmail.textContent = "Logged in as: " + data.clientPrincipal.userDetails;
    } else {
      loginBtn.style.display = "inline";
      logoutBtn.style.display = "none";
      userEmail.textContent = "";
    }
  });
</script>
</body>
</html>